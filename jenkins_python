pipeline{
  agent any

  stages{
    stage('Checkout'){
      steps{
        git branch: 'main', url: 'https://github.com/Mayur-Hambar/DevOps_Lab' 
      }
    }

    stage('Setup Environment') {
          steps {
              script {
                  sh 'apt install python3.12-venv'
                  sh 'python3 -m venv venv' // Create virtual environment
                  sh '. venv/bin/activate' // Activate virtual environment
                  sh 'pip install -r requirements.txt' // Install dependencies
              }
          }
    }

    stage('Run'){
      steps{
        echo 'Running the Python program...'
        sh 'python3 HelloPython.py'
      }
    }
  }

  post{
    success{
      echo 'Build and execution successful..'
    }
    failure{
      echo 'Build failed..'
    }
  }
}
